# Fin-Core API Documentation

## üöÄ **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**

- **Base URL**: `http://localhost:8080/api/v1`
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: Cookie `token` —Å JWT —Ç–æ–∫–µ–Ω–æ–º
- **Content-Type**: `application/json`

## üìã **Swagger UI**

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://localhost:8080/swagger/index.html
```

## üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**

–í—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Ç–æ–∫–µ–Ω –≤ cookie:
```javascript
// –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å —Ç–æ–∫–µ–Ω–æ–º
fetch('http://localhost:8080/api/v1/account', {
  method: 'GET',
  credentials: 'include', // –í–∞–∂–Ω–æ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ cookies
  headers: {
    'Content-Type': 'application/json'
  }
})
```

## üìä **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**

### **–ê–∫–∫–∞—É–Ω—Ç—ã**

#### –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
```http
POST /api/v1/account
Content-Type: application/json

{
  "display_name": "–ú–æ–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç
```http
GET /api/v1/account
```

### **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å—á–µ—Ç–∞**

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ —Å—á–µ—Ç–∞
```http
GET /api/v1/bankAccounts
```

#### –°–æ–∑–¥–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç
```http
POST /api/v1/bankAccounts
Content-Type: application/json

{
  "name": "–ö–∞—Å–ø–∏ —Ä—É–±–ª–∏",
  "currency": "KZT",
  "account_type": "debit",
  "bank_name": "Kaspi"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç
```http
GET /api/v1/bankAccounts/{bank_account_id}
```

#### –£–¥–∞–ª–∏—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç
```http
DELETE /api/v1/bankAccounts/{bank_account_id}
```

#### –î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç
```http
PUT /api/v1/bankAccounts/{bank_account_id}/deactivate
```

#### –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–π —Å—á–µ—Ç
```http
PUT /api/v1/bankAccounts/{bank_account_id}/activate
```

### **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**

#### –°–æ–∑–¥–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
```http
POST /api/v1/transactions
Content-Type: application/json

{
  "bank_account_id": 1,
  "category_id": 1,
  "amount": 5000.00,
  "description": "–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤",
  "transaction_type": "expense"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
```http
GET /api/v1/transactions
```

#### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
```http
GET /api/v1/transactions/{id}
```

#### –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
```http
POST /api/v1/transfer
Content-Type: application/json

{
  "from_bank_account_id": 1,
  "to_bank_account_id": 2,
  "amount": 10000.00,
  "description": "–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç"
}
```

#### –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –∞–∫–∫–∞—É–Ω—Ç—É
```http
GET /api/v1/account/{account_id}/transactions
```

#### –ë–∞–ª–∞–Ω—Å –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Å—á–µ—Ç–∞
```http
GET /api/v1/bank_accounts/{account_id}/balance
```

### **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**

#### –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
```http
POST /api/v1/categories
Content-Type: application/json

{
  "name": "–ü—Ä–æ–¥—É–∫—Ç—ã",
  "type": "expense",
  "color": "#FF5722",
  "icon": "shopping_cart"
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
```http
GET /api/v1/categories
```

#### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
```http
GET /api/v1/categories/{category_id}
```

#### –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
```http
DELETE /api/v1/categories/{category_id}
```

## üìù **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö**

### **–¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**
- `income` - –¥–æ—Ö–æ–¥
- `expense` - —Ä–∞—Å—Ö–æ–¥  
- `transfer` - –ø–µ—Ä–µ–≤–æ–¥

### **–¢–∏–ø—ã –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤**
- `cash` - –Ω–∞–ª–∏—á–Ω—ã–µ
- `debit` - –¥–µ–±–µ—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞
- `credit` - –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞
- `savings` - —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω—ã–π —Å—á–µ—Ç

### **–í–∞–ª—é—Ç—ã**
- `KZT` - —Ç–µ–Ω–≥–µ
- `USD` - –¥–æ–ª–ª–∞—Ä –°–®–ê
- `EUR` - –µ–≤—Ä–æ
- `RUB` - —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å

### **–¢–∏–ø—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
- `income` - –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤
- `expense` - –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤

## ‚ö†Ô∏è **–ö–æ–¥—ã –æ—à–∏–±–æ–∫**

- `400` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
- `401` - –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω)
- `403` - –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- `404` - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `409` - –ö–æ–Ω—Ñ–ª–∏–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å —Å—á–µ—Ç —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏)
- `500` - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## üîÑ **–ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤**

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "success": true,
  "data": {
    "id": 1,
    "name": "–ö–∞—Å–ø–∏ —Ä—É–±–ª–∏",
    "currency": "KZT",
    "balance": 150000.00
  }
}
```

### –û—à–∏–±–∫–∞
```json
{
  "success": false,
  "error": "invalid bank account id",
  "details": "bank account not found"
}
```

## üõ†Ô∏è **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**

### Postman Collection
–ú–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å Swagger JSON –≤ Postman:
```
http://localhost:8080/swagger/doc.json
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `go run cmd/server/main.go`
2. –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI: `http://localhost:8080/swagger/index.html`
3. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ auth-—Å–µ—Ä–≤–∏—Å–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ cookie –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
